# EZXCodec-1.3.5
Copied from https://forum.motofan.ru/index.php?showtopic=125183
# Readme
EZXCodec - редактирование прошивок EZX-телефонов в среде Windows.

Возможности программы на данный момент:
  -разбор файла прошивки (*.SBF) на кодовые группы;
  -разбор кодовых групп, содержащих файловую систему CramFS на файлы и папки;
  -сбор CramFS кодовых групп из файлов и папок с сохранением свойств файлов и папок и автоматическим выравниванием размера новых кодовых групп;
  -сбор файла прошивки из кодовых групп.

Необходимые файлы:
  В разборе и сборе кодовых групп CramFS EZXCodec'у помогают две программы - cramfsck и mkcramfs. Это Windows-билды Linux-программ, поэтому для их работы нужен файл эмуляции POSIX - cygwin1.dll. Поскольку файловая система CramFS использует сжатие, для работы с ней этим программам также потребуется файл cygz.dll.
  Все эти файлы можно найти по следующему адресу:
  http://gd.tuwien.ac.at/gnu/gnu-win32/release/
  или через http://www.google.ru/
  Прямые ссылки на архивы с программами и файлами:
  http://gd.tuwien.ac.at/gnu/gnu-win32/release/cramfs/cramfs-1.1-1.tar.bz2
  http://gd.tuwien.ac.at/gnu/gnu-win32/release/cygwin/cygwin-1.5.24-2.tar.bz2
  http://gd.tuwien.ac.at/gnu/gnu-win32/release/zlib/zlib-1.2.3-2.tar.bz2
  Архивы *.bz2 легко извлекаются бесплатным архиватором 7-zip (http://sevenzip.sf.net/)
  Извлеките из архивов указанные выше файлы в папку с программой.
  
Инструкция по применению

1. Рабочая папка
  Перед началом работы с программой выберите для неё рабочую папку (Working directory). Там программа будет хранить как промежуточные рабочие файлы, так и файлы, которые, возможно, вы захотите отредактировать. Желательно выбирать пустую папку, чтобы в будущем не перепутать файлы. Все необзодимые подпапки создаются автоматически.

2.1. Разбор файлов прошивок (SBF)
  Ниже поля для выбора рабочей папки (Working directory) находятся две вкладки - SBF и CramFS. Для разбора SBF файла прошивки перейдите на вкладку SBF и в поле Original SBF file выберите оригинальный файл прошивки (тот, который хотите разобрать). Для удобства можно воспользоваться кнопкой с тремя точками. После того, как вы выбрали нужный файл, нажмите кнопку Parse. Таблицу, находящуюся ниже, заполнит информация о кодовых группах, которые содержатся в выбранном вами файле прошивки. После появления надписи Completed в самом нижнем поле окна программы можно выбрать кодовые группы для извлечения. Отмеченные группы (вместе с необходимой программе информацией для сбора) по нажатию на кнопку Extract извлекаются в подпапку sbf_extracted рабочей папки.

2.2. Сбор файлов прошивок (SBF)
  Чтобы собрать SBF файл из кодовых групп необходимо уже иметь извлеченные файлы кодовых групп в подпапке sbf_extracted выбранной рабочей папки (изменённые вами файлы групп необходимо скопировать в эту же папку, заменяя оригиналы). Для некоторых групп требуется дополнительная информация, содержащаяся в той же папке в файле sbf_info.txt. Проще говоря - вы должны извлечь кодовые группы в этой программе перед тем, как собирать прошивку заново.
  Если между извлечением кодовых групп и сбором новой прошивки вы закрывали программу и таблица, в которой должна находиться информация о кодовых группах оригинального SBF файла, пуста, нажмите Parse, и таблица заполнится. Но при этом необходимо удостовериться, что в поле Original SBF file выбран тот же оригинальный файл, который вы выбирали при извлечении. Путь к рабочей папке тоже должен остаться неизменным. Все поля с именами файлов и папок сохраняются при выходе.
  Отметьте группы, из которых вы хотите собрать новую прошивку, выберите путь и имя нового SBF файла в поле New SBF file, нажмите Compile, и ждите появления Completed в самом нижнем поле окна программы.

3.1. Разбор кодовых групп CramFS
  В поле Original CramFS file/info необходимо указать нужный вам SMG файл кодовой группы из подпапки sbf_extracted выбранной вами рабочей папки. Затем нажмите Open, таблица ниже заполнится информацией о файловой системе кодовой группы. Чтобы извлечь файлы в подпапку cramfs_extracted рабочей папки, нажмите Extract. Вы узнаете о завершении операции извлечения по появлению Completed в нижнем поле окна программы.

3.2. Модификация и сбор кодовых групп CramFS
  После извлечения файлов из CramFS вы, возможно, захотите изменить содержимое извлеченных файлов или добавить новые.
  В первом случае вы просто редактируете (или заменяете) файлы на своё усмотрение.
  Во втором случае (при добавлении новых файлов) для дальнейшей корректной работы прошивки может потребоваться редактирование файла cramfs_info.txt в выбранной вами рабочей папке. В этом текстовом файле EZXCodec хранит информацию о правах доступа к файлам CramFS. При сборе кодовой группы EZXCodec считывает информацию из этого файла и, если информация о каком-то файле не будет найдена, будут выставлены права по умолчанию, после чего не всегда возможна корректная работа прошивки в телефоне. Для того, чтобы EZXCodec нашёл информацию о вновь добавленном файле, необходимо создать новую строку в файле cramfs_info.txt.
  Строки файла cramfs_info.txt (начиная с третьей) имеют следующий формат:
  <путь к файлу/имя файла>=<права и user>|<group>
  Если указаны данные папки, то к имени в конце добавляется символ "/".
  Если файл содержится в папке /dev, то вместе с group хранится и его размер (который фактически не является размером файла, а выполняет другую роль).
  Свойства <права и user> и <group> представлены в виде целых чисел. Данные (пока) хранятся в неудобном для человеческого восприятия формате, поэтому для присвоения файлу (папке) правильных свойств, необходимо найти строку с информацией о файле с нужными свойствами и скопировать числа в новую строку.
  После совершения необходимых вам модификаций выберите имя нового файла кодовой группы в поле New CramFS file и нажмите Compile. Ждите надписи Completed.
  
4. Выдаваемые программой сообщения
  Пока не написал :)
  
5. Спасибо за помощь в создании программы
  Всему форуму motofan.ru, и его участникам:
  lucrece - за то, что поделился информацией о формате SBF-файлов
  Xronos - за терпеливое тестирование и моральную поддержку
# What's New?
EZXCodec changelog:

0.3 pre 1
  -added compiling of SBF files from separate codegroups
  -hence renamed from 'CramFS Corrector' to 'EZXCodec'

0.2 pre 6
  -fixed error when writing new offset value in nodes

0.2 pre 5
  -trying to fix error when writing new offset value in nodes

0.2 pre 4
  -fixed error when writing new CRC to CramFS file

0.2 pre 3
  -some CramFS correction optimizations
  -added Ctrl+C copy from log (currently selected item)
  -fixed log strings typos

0.2 pre 2
  -added possibility to zero offset value in nodes with non-zero size value
  -added possibility to fix CramFS CRC error (NOT recommended
   unless nodes offset correction was used)
  -added validation of SBF file header before parsing

0.2 pre 1
  -added extraction of codegroups from SBF firmware files
  -file/directory names now stored in 'cramcorr.ini'
  -fixed crash when trying to open zero-length codegroup file
  -added check for 'working directory' existance
  -minor logging optimizations

0.1
  -initial release
